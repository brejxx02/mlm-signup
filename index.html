<!DOCTYPE html>
<html>
<head>
<title>BRAJESH NETWORK</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f2f2f2;padding:20px;}
.box{background:white;padding:20px;border-radius:10px;max-width:400px;margin:auto;}
input{width:100%;padding:10px;margin:8px 0;border-radius:6px;border:1px solid #aaa;}
button{width:100%;padding:10px;background:#007bff;color:white;font-size:16px;
border:none;border-radius:6px;margin-top:10px;}
button:hover{opacity:.8}
</style>
</head>

<body>

<div class="box" id="signupBox">
<h2>Create Account</h2>
<input id="name" placeholder="Full Name">
<input id="email" placeholder="Email">
<input id="mobile" placeholder="Mobile Number">
<input id="password" type="password" placeholder="Password">
<input id="sponsor" placeholder="Sponsor Code (required)">
<button onclick="signup()">Sign Up</button>
<p>Already have an account? <a href="#" onclick="showLogin()">Login</a></p>
</div>

<div class="box" id="loginBox" style="display:none;">
<h2>Login</h2>
<input id="emailLogin" placeholder="Email">
<input id="passwordLogin" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<p>Don't have account? <a href="#" onclick="showSignup()">Create New</a></p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } 
from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
import { getFirestore, doc, setDoc } 
from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyATpuhDoP366I8e7XPcuphtfVdN0ucz69w",
    authDomain: "brajeshnetwork-f21c8.firebaseapp.com",
    projectId: "brajeshnetwork-f21c8",
    storageBucket: "brajeshnetwork-f21c8.firebasestorage.app",
    messagingSenderId: "1053315949596",
    appId: "1:1053315949596:web:7bbe45427cf6f29520abd9"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

async function signup(){
 let name = document.getElementById("name").value;
 let email = document.getElementById("email").value;
 let mobile = document.getElementById("mobile").value;
 let password = document.getElementById("password").value;
 let sponsor = document.getElementById("sponsor").value;

 if(!name || !email || !mobile || !password || !sponsor){
    alert("All fields required!");
    return;
 }

 createUserWithEmailAndPassword(auth, email, password)
 .then(async(user)=>{
   await setDoc(doc(db,"users", user.user.uid),{
     name,email,mobile,sponsor,
     joined:false,
     wallet:0,
     level1:0,level2:0,level3:0,level4:0,
     referLink:"https://mlm-signup.netlify.app/?ref="+user.user.uid
   });
   alert("Signup Successful! Now Login");
   showLogin();
 })
 .catch(e=>alert(e.message));
}

function login(){
 let email = document.getElementById("emailLogin").value;
 let password = document.getElementById("passwordLogin").value;

 signInWithEmailAndPassword(auth, email, password)
 .then(()=>{
   alert("Login Success!");
   window.location.href="dashboard.html";
 })
 .catch(e=>alert(e.message));
}

function showLogin(){signupBox.style.display="none";loginBox.style.display="block";}
function showSignup(){signupBox.style.display="block";loginBox.style.display="none";}
</script>

</body>
</html>
